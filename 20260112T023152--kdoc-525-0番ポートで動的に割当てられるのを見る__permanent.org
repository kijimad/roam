:properties:
:ID: 20260112T023152
:end:
#+title:      KDOC 525: 0番ポートで動的に割当てられるのを見る
#+date:       [2026-01-12 Mon 02:31]
#+filetags:   :permanent:
#+identifier: 20260112T023152

* この文書のステータス
- 作成
  - [X] 2026-02-01 貴島
- レビュー
  - [X] 2026-02-01 貴島

* 概要

0番ポートを指定すると動的にポートが割り当てられるのを確かめた。

#+begin_src go-test :verbose t
  import (
    "net"
    "fmt"
    "github.com/stretchr/testify/require"
  )

  func TestPort(t *testing.T) {
    listenHelper(t)
    listenHelper(t)
    listenHelper(t)
  }

  func listenHelper(t *testing.T) {
     t.Helper()

     l, err := net.Listen("tcp", ":0")
     require.NoError(t, err)

     fmt.Println(l.Addr())
  }
#+end_src

#+RESULTS:
#+begin_src
=== RUN   TestPort
[::]:34993
[::]:36783
[::]:35523
--- PASS: TestPort (0.00s)
PASS
ok  	test	0.002s
#+end_src

* 関連

- 動機: [[id:20260112T023152][KDOC 499: 0番ポートは動的割当に利用される]]。確かめた
- 追加調査: OS側で処理されているのを確認する
