<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><author><name>Kijima Daigo</name></author>
<title>Insomnia</title>
<generator>Emacs webfeeder.el</generator>
<link href="https://kijimad.github.io/roam"/>
<link href="https://kijimad.github.io/roam/atom.xml" rel="self"/>
<id>https://kijimad.github.io/roam/atom.xml</id>
<updated>2025-12-10T23:56:02+09:00</updated>
<entry>
  <title>KDOC 500: Covering Indexを試す</title>
  <author><name>kijimaD</name></author>
  <content type="html"><![CDATA[<div id="content" class="content">

 <div id="outline-container-org58c3e5b" class="outline-2">
 <h2 id="org58c3e5b"> <a href="#org58c3e5b">この文書のステータス</a></h2>
 <div class="outline-text-2" id="text-org58c3e5b">
 <ul class="org-ul"> <li>作成
 <ul class="org-ul"> <li class="off"> <input type="checkbox"></input> <署名></li>
</ul></li>
</ul> <ul class="org-ul"> <li>レビュー
 <ul class="org-ul"> <li class="off"> <input type="checkbox"></input> <署名></li>
</ul></li>
</ul></div>
</div>
 <div id="outline-container-org3310201" class="outline-2">
 <h2 id="org3310201"> <a href="#org3310201">概要</a></h2>
 <div class="outline-text-2" id="text-org3310201">
 <p>
 <a href="https://syu-m-5151.hatenablog.com/entry/2025/11/25/135220">「Postgres で試した？」と聞き返せるようになるまでもしくはなぜ私は雰囲気で技術を語るのか？</a>で、Covering Indexという見慣れない単語を見た。調べて、試す。
</p>

 <p>
インデックスにINCLUDEオプションをつけることで、内容についてもキャッシュを追加できる。
</p>

 <blockquote>
 <p>
オプションのINCLUDE句は非キー列としてインデックスに含める列のリストを指定します。 非キー列をインデックススキャンの検索条件に使うことはできません。また、インデックスで何であれ一意性制約や排他制約を強制する目的に対しても無視されます。 しかしながら、インデックスオンリースキャンは、インデックスエントリから値を直接得ることができるので、インデックスのテーブルを見に行く必要なく、非キー列の内容を返すことができます。 このように非キー列の追加は、そうでないとできないインデックスオンリースキャンを利用可能にします。
 <a href="https://www.postgresql.jp/docs/13/sql-createindex.html">CREATE INDEX</a>
</p>
</blockquote>

 <div class="org-src-container">
 <pre class="src src-sql"> <span class="org-keyword">CREATE</span>  <span class="org-keyword">TABLE</span>  <span class="org-function-name">users</span> (
    tel  <span class="org-type">integer</span>,
    name1  <span class="org-type">varchar</span>(255),
    name2  <span class="org-type">varchar</span>(255)
);
 <span class="org-keyword">CREATE</span> INDEX idx_users_name1  <span class="org-keyword">ON</span> users(name1) INCLUDE (tel);
 <span class="org-keyword">CREATE</span> INDEX idx_users_name2  <span class="org-keyword">ON</span> users(name2);

 <span class="org-comment-delimiter">-- </span> <span class="org-comment">include付き
</span>explain
 <span class="org-keyword">select</span> tel  <span class="org-keyword">from</span> users  <span class="org-keyword">where</span> name1 =  <span class="org-string">'a'</span>;

 <span class="org-comment-delimiter">-- </span> <span class="org-comment">includeなし
</span>explain
 <span class="org-keyword">select</span> tel  <span class="org-keyword">from</span> users  <span class="org-keyword">where</span> name2 =  <span class="org-string">'a'</span>;
</pre>
</div>

 <div class="org-src-container">
 <pre class="src src-nil">|                                                                                  |
|----------------------------------------------------------------------------------|
| > CREATE TABLE users (                                                           |
| >     tel integer,                                                               |
| >     name1 varchar(255),                                                        |
| >     name2 varchar(255)                                                         |
| > );                                                                             |
| CREATE TABLE                                                                     |
|                                                                                  |
| > CREATE INDEX idx_users_name1 ON users(name1) INCLUDE (tel);                    |
| CREATE INDEX                                                                     |
|                                                                                  |
| > CREATE INDEX idx_users_name2 ON users(name2);                                  |
| CREATE INDEX                                                                     |
|                                                                                  |
| > explain                                                                        |
| > select tel from users where name1 = 'a';                                       |
| QUERY PLAN                                                                       |
| Index Only Scan using idx_users_name1 on users  (cost=0.14..8.16 rows=1 width=4) |
| Index Cond: (name1 = 'a'::text)                                                  |
|                                                                                  |
| > explain                                                                        |
| > select tel from users where name2 = 'a';                                       |
| QUERY PLAN                                                                       |
| Index Scan using idx_users_name2 on users  (cost=0.14..8.16 rows=1 width=4)      |
| Index Cond: ((name2)::text = 'a'::text)                                          |
</pre>
</div>
</div>
</div>
 <div id="outline-container-org29ac9b6" class="outline-2">
 <h2 id="org29ac9b6"> <a href="#org29ac9b6">関連</a></h2>
 <div class="outline-text-2" id="text-org29ac9b6">
 <ul class="org-ul"> <li> <a href="20251207T091742--kdoc-497-複合インデックスの使用条件を試す__draft_permanent.html#ID-20251207T091742">KDOC 497: 複合インデックスの使用条件を試す</a>。インデックスつながり</li>
</ul></div>
</div>
</div>]]></content>
  <link href="https://kijimad.github.io/roam/20251208T083954--kdoc-500-covering-indexを試す__draft_permanent.html"/>
  <id>https://kijimad.github.io/roam/20251208T083954--kdoc-500-covering-indexを試す__draft_permanent.html</id>
  <updated>2025-12-11T08:55:58+09:00</updated>
</entry>
<entry>
  <title>KDOC 501: インデックスのオーバーヘッドを検証する</title>
  <author><name>kijimaD</name></author>
  <content type="html"><![CDATA[<div id="content" class="content">

 <div id="outline-container-org6f6d3ca" class="outline-2">
 <h2 id="org6f6d3ca"> <a href="#org6f6d3ca">この文書のステータス</a></h2>
 <div class="outline-text-2" id="text-org6f6d3ca">
 <ul class="org-ul"> <li>作成
 <ul class="org-ul"> <li class="off"> <input type="checkbox"></input> <署名></li>
</ul></li>
</ul> <ul class="org-ul"> <li>レビュー
 <ul class="org-ul"> <li class="off"> <input type="checkbox"></input> <署名></li>
</ul></li>
</ul></div>
</div>
 <div id="outline-container-org467584e" class="outline-2">
 <h2 id="org467584e"> <a href="#org467584e">概要</a></h2>
 <div class="outline-text-2" id="text-org467584e">
 <p>
 <a href="https://syu-m-5151.hatenablog.com/entry/2025/11/25/135220">「Postgres で試した？」と聞き返せるようになるまでもしくはなぜ私は雰囲気で技術を語るのか？ — Just use Postgres 読書感想文</a>のOver-Indexingを読んで、インデックスの具体的なオーバヘッドを知った。
</p>

 <blockquote>
 <ul class="org-ul"> <li>作成時にディスク容量を消費する</li>
 <li>更新時にメンテナンスコストがかかる</li>
 <li>計画時（Planning Time）にオプション評価のコストがかかる</li>
</ul></blockquote>

 <p>
これらをじっさいに試す。
</p>
</div>
</div>
 <div id="outline-container-orge76e9a8" class="outline-2">
 <h2 id="orge76e9a8"> <a href="#orge76e9a8">関連</a></h2>
 <div class="outline-text-2" id="text-orge76e9a8">
 <p>
なし。
</p>
</div>
</div>
</div>]]></content>
  <link href="https://kijimad.github.io/roam/20251210T084437--kdoc-501-インデックスのオーバーヘッドを検証する__draft_permanent.html"/>
  <id>https://kijimad.github.io/roam/20251210T084437--kdoc-501-インデックスのオーバーヘッドを検証する__draft_permanent.html</id>
  <updated>2025-12-11T08:55:56+09:00</updated>
</entry>
<entry>
  <title>KDOC 491: 『マイクロサービスアーキテクチャ』</title>
  <author><name>kijimaD</name></author>
  <content type="html"><![CDATA[<div id="content" class="content">

 <div id="outline-container-org277b841" class="outline-2">
 <h2 id="org277b841"> <a href="#org277b841">この文書のステータス</a></h2>
 <div class="outline-text-2" id="text-org277b841">
 <ul class="org-ul"> <li>作成
 <ul class="org-ul"> <li class="off"> <input type="checkbox"></input> <署名></li>
</ul></li>
</ul> <ul class="org-ul"> <li>レビュー
 <ul class="org-ul"> <li class="off"> <input type="checkbox"></input> <署名></li>
</ul></li>
</ul></div>
</div>
 <div id="outline-container-org913ddc7" class="outline-2">
 <h2 id="org913ddc7"> <a href="#org913ddc7">概要</a></h2>
 <div class="outline-text-2" id="text-org913ddc7">
</div>
</div>
 <div id="outline-container-org5258a19" class="outline-2">
 <h2 id="org5258a19"> <a href="#org5258a19">メモ</a></h2>
 <div class="outline-text-2" id="text-org5258a19">
 <ul class="org-ul"> <li>マイクロサービスはサービス指向アーキテクチャ(SOA)の一種である。サービス境界の引き方については意見が分かれるところですが、独立してデプロイできるのが重要である(p3)</li>
 <li>独立デプロイ可能性を実現したい場合、データベースの共有は最悪なことの1つである(p9)</li>
 <li>システムのすべての機能をまとめてデプロイしなければならない場合、モノリス、だという(p15)</li>
 <li>モジュラモノリス: 各モジュールで独立して作業できるが、デプロイするにはすべてを結合する必要がある。多くの組織で優れた選択肢で、マイクロサービスアーキテクチャの課題を回避しながら高度な並列作業ができる(p17)
 <ul class="org-ul"> <li>課題の1つとして、コードレベルで行われるような分解が、データベースにおいては行われない傾向がある(p17)</li>
 <li>モジュラごとに分解したデータベースを使うモジュラモノリスもある</li>
</ul></li>
 <li>人々はモノリスを避けるべきもの、本質的に問題があるもの、と考えるようになっている。モノリシックアーキテクチャは1つの選択肢であり有効である(p19)</li>
 <li>100万行のモノリシックアプリケーションのうち1行を変更したら、その変更をリリースするためにアプリケーション全体をデプロイする必要があるようなデプロイは、影響が大きく危険性の高いものになる可能性がある(p26)</li>
 <li>分散システムでは複数プロセスが異なるデータベースで状態を管理する。データ一貫性の観点で課題が発生する可能性がある(p33)</li>
 <li>安定したサービス境界を定義することの重要性を考えると、マイクロサービスアーキテクチャは新製品やスタートアップにとって向いてないことが多い。開発するにつれて、作業するドメインが大きく変更されるのが一般的である。ドメインモデルがじゅうぶん安定するまで待ってからサービス境界を定義するほうが適切である(p33)</li>
 <li>凝集を説明する簡潔な定義: 一緒に変更され、一緒に存在するコード(p40)</li>
</ul></div>
</div>
 <div id="outline-container-orgb853b73" class="outline-2">
 <h2 id="orgb853b73"> <a href="#orgb853b73">関連</a></h2>
 <div class="outline-text-2" id="text-orgb853b73">
 <p>
なし。
</p>
</div>
</div>
</div>]]></content>
  <link href="https://kijimad.github.io/roam/20251129T082342--kdoc-491-『マイクロサービスアーキテクチャ』__draft_book.html"/>
  <id>https://kijimad.github.io/roam/20251129T082342--kdoc-491-『マイクロサービスアーキテクチャ』__draft_book.html</id>
  <updated>2025-12-11T08:55:55+09:00</updated>
</entry>
<entry>
  <title>KDOC 498: 絶滅メディア博物館を観察する</title>
  <author><name>kijimaD</name></author>
  <content type="html"><![CDATA[<div id="content" class="content">

 <div id="outline-container-org187ac2b" class="outline-2">
 <h2 id="org187ac2b"> <a href="#org187ac2b">この文書のステータス</a></h2>
 <div class="outline-text-2" id="text-org187ac2b">
 <ul class="org-ul"> <li>作成
 <ul class="org-ul"> <li class="off"> <input type="checkbox"></input> <署名></li>
</ul></li>
</ul> <ul class="org-ul"> <li>レビュー
 <ul class="org-ul"> <li class="off"> <input type="checkbox"></input> <署名></li>
</ul></li>
</ul></div>
</div>
 <div id="outline-container-org3cba298" class="outline-2">
 <h2 id="org3cba298"> <a href="#org3cba298">概要</a></h2>
 <div class="outline-text-2" id="text-org3cba298">
 <p>
絶滅メディア博物館は、東京都千代田区にある博物館である。
</p>

 <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d895.7287805120283!2d139.76786299441568!3d35.68951879196432!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x60188d7f2e9513d1%3A0x22e77b7e3001a812!2sExtinct%20Media%20Museum!5e1!3m2!1sen!2sjp!4v1765195098606!5m2!1sen!2sjp" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
</div>
</div>
 <div id="outline-container-org37c114f" class="outline-2">
 <h2 id="org37c114f"> <a href="#org37c114f">メモ</a></h2>
 <div class="outline-text-2" id="text-org37c114f">
 <ul class="org-ul"> <li>たくさんの種類のガラケーがあって、当時はそうだった、と思い出した。いろいろな個性ある機種があって、携帯ショップを見るのは楽しかった。今は携帯端末は基本的にすべて同じ形状で、ささやかな違いがあるにすぎない。面白くはない。このパターンは、多くの博物館で見てきたものに見える。ある時期に、過剰ともいえるようなさまざまな種別が生まれるが、ある時期で収束して違いはなくなっていく。自動車/自転車/カメラ…</li>
 <li>さらに興味がある人むけに、ほかの専門的な博物館へのリンクも随所にあった。たとえば <a href="20250831T135810--kdoc-433-カメラ博物館を観察する__essay.html#ID-20250831T135810">KDOC 433: カメラ博物館を観察する</a>のカメラ博物館など。次のアクションを示してくれるのはよいと感じた</li>
</ul></div>
</div>
 <div id="outline-container-org6b8bcb5" class="outline-2">
 <h2 id="org6b8bcb5"> <a href="#org6b8bcb5">関連</a></h2>
 <div class="outline-text-2" id="text-org6b8bcb5">
 <p>
なし。
</p>
</div>
</div>
 <div id="outline-container-org12409c0" class="outline-2">
 <h2 id="org12409c0"> <a href="#org12409c0">Backlinks</a></h2>
 <div class="outline-text-2" id="text-org12409c0">
 <ul class="org-ul"> <li> <a href="./20240908T180537--kdoc-238-他人の博物館を観察して参考にする__project.html">KDOC 238: 他人の博物館を観察して参考にする</a></li>
</ul></div>
</div>
</div>]]></content>
  <link href="https://kijimad.github.io/roam/20251207T143600--kdoc-498-絶滅メディア博物館を観察する__draft_essay.html"/>
  <id>https://kijimad.github.io/roam/20251207T143600--kdoc-498-絶滅メディア博物館を観察する__draft_essay.html</id>
  <updated>2025-12-11T08:55:49+09:00</updated>
</entry>
<entry>
  <title>KDOC 488: CookieはHTTPの仕様に含まれる</title>
  <author><name>kijimaD</name></author>
  <content type="html"><![CDATA[<div id="content" class="content">

 <div id="outline-container-org450cdca" class="outline-2">
 <h2 id="org450cdca"> <a href="#org450cdca">この文書のステータス</a></h2>
 <div class="outline-text-2" id="text-org450cdca">
 <ul class="org-ul"> <li>作成
 <ul class="org-ul"> <li class="on"> <input type="checkbox" checked="checked"></input> 2025-12-06 貴島</li>
</ul></li>
 <li>レビュー
 <ul class="org-ul"> <li class="on"> <input type="checkbox" checked="checked"></input> 2025-12-08 貴島</li>
</ul></li>
</ul></div>
</div>
 <div id="outline-container-org1bd8775" class="outline-2">
 <h2 id="org1bd8775"> <a href="#org1bd8775">概要</a></h2>
 <div class="outline-text-2" id="text-org1bd8775">
 <p>
HTTPの仕様のなかに、Cookieがある。HTTPリクエストとレスポンスにステートフルなセッション提供するため提案されたという。
</p>

 <ul class="org-ul"> <li> <a href="https://ja.wikipedia.org/wiki/HTTP_cookie">HTTP cookie - Wikipedia</a></li>
 <li> <a href="https://www.rfc-editor.org/rfc/rfc2109">RFC 2109: HTTP State Management Mechanism</a></li>
 <li> <a href="https://www.rfc-editor.org/rfc/rfc6265">RFC 6265: HTTP State Management Mechanism</a></li>
</ul></div>
</div>
 <div id="outline-container-org2e9ee7c" class="outline-2">
 <h2 id="org2e9ee7c"> <a href="#org2e9ee7c">関連</a></h2>
 <div class="outline-text-2" id="text-org2e9ee7c">
 <ul class="org-ul"> <li> <a href="20251120T225113--kdoc-487-cookieは自動で送る__permanent.html#ID-20251120T225113">KDOC 487: Cookieは自動で送る</a>。調べたきっかけ</li>
</ul></div>
</div>
</div>]]></content>
  <link href="https://kijimad.github.io/roam/20251120T225617--kdoc-488-cookieはhttpの仕様に含まれる__permanent.html"/>
  <id>https://kijimad.github.io/roam/20251120T225617--kdoc-488-cookieはhttpの仕様に含まれる__permanent.html</id>
  <updated>2025-12-11T08:55:47+09:00</updated>
</entry>
<entry>
  <title>KDOC 497: 複合インデックスの使用条件を試す</title>
  <author><name>kijimaD</name></author>
  <content type="html"><![CDATA[<div id="content" class="content">

 <div id="outline-container-orgf474263" class="outline-2">
 <h2 id="orgf474263"> <a href="#orgf474263">この文書のステータス</a></h2>
 <div class="outline-text-2" id="text-orgf474263">
 <ul class="org-ul"> <li>作成
 <ul class="org-ul"> <li class="off"> <input type="checkbox"></input> <署名></li>
</ul></li>
</ul> <ul class="org-ul"> <li>レビュー
 <ul class="org-ul"> <li class="off"> <input type="checkbox"></input> <署名></li>
</ul></li>
</ul></div>
</div>
 <div id="outline-container-orgadec054" class="outline-2">
 <h2 id="orgadec054"> <a href="#orgadec054">概要</a></h2>
 <div class="outline-text-2" id="text-orgadec054">
 <p>
複合インデックスによるスキャン方法の変化を実験した。
</p>

 <div class="org-src-container">
 <label class="org-src-name"> <span class="listing-number">Listing 1: </span>複合インデックスを使う</label> <pre class="src src-sql"> <span class="org-keyword">CREATE</span>  <span class="org-keyword">TABLE</span>  <span class="org-function-name">users</span> (
    id serial  <span class="org-keyword">PRIMARY</span>  <span class="org-keyword">KEY</span>,
     <span class="org-keyword">name</span>  <span class="org-type">varchar</span>(255),
    tel  <span class="org-type">integer</span>,
    nonidx  <span class="org-type">varchar</span>(255)
);
 <span class="org-keyword">CREATE</span> INDEX idx_users_name  <span class="org-keyword">ON</span> users( <span class="org-keyword">name</span>, tel);

 <span class="org-comment-delimiter">-- </span> <span class="org-comment">レコードが空だと、すべてインデックス使用になったため
</span> <span class="org-keyword">INSERT</span>  <span class="org-keyword">INTO</span> users ( <span class="org-keyword">name</span>, tel)
 <span class="org-keyword">SELECT</span>
     <span class="org-string">'Name'</span> || (i % 1000),
    (i % 10000)
 <span class="org-keyword">FROM</span> generate_series(1, 100000) i;

 <span class="org-comment-delimiter">-- </span> <span class="org-comment">複合インデックスの両方の要素を使うと、インデックスが使われる
</span>explain
 <span class="org-keyword">select</span> id  <span class="org-keyword">from</span> users  <span class="org-keyword">where</span>  <span class="org-keyword">name</span> =  <span class="org-string">'a'</span>  <span class="org-keyword">and</span> tel = 1;

 <span class="org-comment-delimiter">-- </span> <span class="org-comment">複合インデックスの両方の要素を使ってインデックス要素だけだと、Index Only Scanになる
</span>explain
 <span class="org-keyword">select</span>  <span class="org-keyword">name</span>  <span class="org-keyword">from</span> users  <span class="org-keyword">where</span>  <span class="org-keyword">name</span> =  <span class="org-string">'a'</span>  <span class="org-keyword">and</span> tel = 1;

 <span class="org-comment-delimiter">-- </span> <span class="org-comment">複合インデックスの最初の要素を使うと、インデックスが使われる
</span>explain
 <span class="org-keyword">select</span> id  <span class="org-keyword">from</span> users  <span class="org-keyword">where</span>  <span class="org-keyword">name</span> =  <span class="org-string">'a'</span>;

 <span class="org-comment-delimiter">-- </span> <span class="org-comment">複合インデックスの順番も入れ替えても、要素があっていればインデックスが使われる
</span>explain
 <span class="org-keyword">select</span> id  <span class="org-keyword">from</span> users  <span class="org-keyword">where</span> tel = 1  <span class="org-keyword">and</span>  <span class="org-keyword">name</span> =  <span class="org-string">'a'</span>;

 <span class="org-comment-delimiter">-- </span> <span class="org-comment">複合インデックスの最初の要素 + インデックス外だとインデックスが使われる
</span>explain
 <span class="org-keyword">select</span> id  <span class="org-keyword">from</span> users  <span class="org-keyword">where</span>  <span class="org-keyword">name</span> =  <span class="org-string">'a'</span>  <span class="org-keyword">and</span> nonidx =  <span class="org-string">'a'</span>;

 <span class="org-comment-delimiter">-- </span> <span class="org-comment">複合インデックスの2番めの要素を使うと、インデックスが使われない
</span>explain
 <span class="org-keyword">select</span> id  <span class="org-keyword">from</span> users  <span class="org-keyword">where</span> tel = 1;
</pre>
</div>

 <div class="org-src-container">
 <pre class="src src-nil">|                                                                                   |   |             |
|-----------------------------------------------------------------------------------+---+-------------|
| > CREATE TABLE users (                                                            |   |             |
| >     id serial PRIMARY KEY,                                                      |   |             |
| >     name varchar(255),                                                          |   |             |
| >     tel integer,                                                                |   |             |
| >     nonidx varchar(255)                                                         |   |             |
| > );                                                                              |   |             |
| CREATE TABLE                                                                      |   |             |
|                                                                                   |   |             |
| > CREATE INDEX idx_users_name ON users(name, tel);                                |   |             |
| CREATE INDEX                                                                      |   |             |
|                                                                                   |   |             |
| > INSERT INTO users (name, tel)                                                   |   |             |
| > SELECT                                                                          |   |             |
| >     'Name'                                                                      |   | (i % 1000), |
| >     (i % 10000)                                                                 |   |             |
| > FROM generate_series(1, 100000) i;                                              |   |             |
| INSERT 0 100000                                                                   |   |             |
|                                                                                   |   |             |
| > explain                                                                         |   |             |
| > select id from users where name = 'a' and tel = 1;                              |   |             |
| QUERY PLAN                                                                        |   |             |
| Index Scan using idx_users_name on users  (cost=0.28..8.30 rows=1 width=4)        |   |             |
| Index Cond: (((name)::text = 'a'::text) AND (tel = 1))                            |   |             |
|                                                                                   |   |             |
| > explain                                                                         |   |             |
| > select name from users where name = 'a' and tel = 1;                            |   |             |
| QUERY PLAN                                                                        |   |             |
| Index Only Scan using idx_users_name on users  (cost=0.28..8.30 rows=1 width=516) |   |             |
| Index Cond: ((name = 'a'::text) AND (tel = 1))                                    |   |             |
|                                                                                   |   |             |
| > explain                                                                         |   |             |
| > select id from users where name = 'a';                                          |   |             |
| QUERY PLAN                                                                        |   |             |
| Bitmap Heap Scan on users  (cost=4.43..69.98 rows=19 width=4)                     |   |             |
| Recheck Cond: ((name)::text = 'a'::text)                                          |   |             |
| ->  Bitmap Index Scan on idx_users_name  (cost=0.00..4.42 rows=19 width=0)        |   |             |
| Index Cond: ((name)::text = 'a'::text)                                            |   |             |
|                                                                                   |   |             |
| > explain                                                                         |   |             |
| > select id from users where tel = 1 and name = 'a';                              |   |             |
| QUERY PLAN                                                                        |   |             |
| Index Scan using idx_users_name on users  (cost=0.28..8.30 rows=1 width=4)        |   |             |
| Index Cond: (((name)::text = 'a'::text) AND (tel = 1))                            |   |             |
|                                                                                   |   |             |
| > explain                                                                         |   |             |
| > select id from users where name = 'a' and nonidx = 'a';                         |   |             |
| QUERY PLAN                                                                        |   |             |
| Bitmap Heap Scan on users  (cost=4.42..70.03 rows=1 width=4)                      |   |             |
| Recheck Cond: ((name)::text = 'a'::text)                                          |   |             |
| Filter: ((nonidx)::text = 'a'::text)                                              |   |             |
| ->  Bitmap Index Scan on idx_users_name  (cost=0.00..4.42 rows=19 width=0)        |   |             |
| Index Cond: ((name)::text = 'a'::text)                                            |   |             |
|                                                                                   |   |             |
| > explain                                                                         |   |             |
| > select id from users where tel = 1;                                             |   |             |
| QUERY PLAN                                                                        |   |             |
| Seq Scan on users  (cost=0.00..588.34 rows=19 width=4)                            |   |             |
| Filter: (tel = 1)                                                                 |   |             |
</pre>
</div>

 <p>
さまざまなスキャン方法があるのを知るのだった。
</p>

 <ul class="org-ul"> <li>Seq Scan</li>
 <li>Bitmap Index Scan</li>
 <li>Bitmap Heap Scan</li>
 <li>Index Only Scan</li>
</ul></div>
</div>
 <div id="outline-container-org7a6d673" class="outline-2">
 <h2 id="org7a6d673"> <a href="#org7a6d673">関連</a></h2>
 <div class="outline-text-2" id="text-org7a6d673">
 <ul class="org-ul"> <li> <a href="20251206T213844--kdoc-496-index-only-scanの様子を見る__draft_permanent.html#ID-20251206T213844">KDOC 496: Index (Only) Scanの様子を見る</a>。インデックスつながり</li>
</ul></div>
</div>
 <div id="outline-container-orgcd790d1" class="outline-2">
 <h2 id="orgcd790d1"> <a href="#orgcd790d1">Backlinks</a></h2>
 <div class="outline-text-2" id="text-orgcd790d1">
 <ul class="org-ul"> <li> <a href="./20251208T083954--kdoc-500-covering-indexを試す__draft_permanent.html">KDOC 500: Covering Indexを試す</a></li>
</ul></div>
</div>
</div>]]></content>
  <link href="https://kijimad.github.io/roam/20251207T091742--kdoc-497-複合インデックスの使用条件を試す__draft_permanent.html"/>
  <id>https://kijimad.github.io/roam/20251207T091742--kdoc-497-複合インデックスの使用条件を試す__draft_permanent.html</id>
  <updated>2025-12-11T08:55:45+09:00</updated>
</entry>
<entry>
  <title>KDOC 487: Cookieは自動で送る</title>
  <author><name>kijimaD</name></author>
  <content type="html"><![CDATA[<div id="content" class="content">

 <div id="outline-container-orga40e139" class="outline-2">
 <h2 id="orga40e139"> <a href="#orga40e139">この文書のステータス</a></h2>
 <div class="outline-text-2" id="text-orga40e139">
 <ul class="org-ul"> <li>作成
 <ul class="org-ul"> <li class="on"> <input type="checkbox" checked="checked"></input> 2025-11-22 貴島</li>
</ul></li>
 <li>レビュー
 <ul class="org-ul"> <li class="on"> <input type="checkbox" checked="checked"></input> 2025-12-06 貴島</li>
</ul></li>
</ul></div>
</div>
 <div id="outline-container-org0a3d440" class="outline-2">
 <h2 id="org0a3d440"> <a href="#org0a3d440">概要</a></h2>
 <div class="outline-text-2" id="text-org0a3d440">
 <p>
恥ずべきことに、Cookieの流れをよくわかっていなかった。
</p>

 <p>
 <a href="https://developer.mozilla.org/ja/docs/Web/HTTP/Guides/Cookies">HTTP Cookie の使用 - HTTP | MDN</a>。
</p>

 <ol class="org-ol"> <li>ブラウザがHTTPサーバにHTTPリクエストする</li>
 <li>ブラウザがHTTPレスポンスのSetCookieヘッダと値を受け取る</li>
 <li> <b>ブラウザが</b> 値を保存する</li>
 <li>過去Cookie保存したドメインの場合、次のリクエスト時に  <b>ブラウザが</b> CookieヘッダーにCookieを含めて送る</li>
</ol></div>
</div>
 <div id="outline-container-org4e82560" class="outline-2">
 <h2 id="org4e82560"> <a href="#org4e82560">関連</a></h2>
 <div class="outline-text-2" id="text-org4e82560">
 <ul class="org-ul"> <li>追加調査: Cookieを観察する</li>
</ul></div>
</div>
 <div id="outline-container-orgc26d37e" class="outline-2">
 <h2 id="orgc26d37e"> <a href="#orgc26d37e">Backlinks</a></h2>
 <div class="outline-text-2" id="text-orgc26d37e">
 <ul class="org-ul"> <li> <a href="./20251120T225617--kdoc-488-cookieはhttpの仕様に含まれる__permanent.html">KDOC 488: CookieはHTTPの仕様に含まれる</a></li>
</ul></div>
</div>
</div>]]></content>
  <link href="https://kijimad.github.io/roam/20251120T225113--kdoc-487-cookieは自動で送る__permanent.html"/>
  <id>https://kijimad.github.io/roam/20251120T225113--kdoc-487-cookieは自動で送る__permanent.html</id>
  <updated>2025-12-11T08:55:44+09:00</updated>
</entry>
<entry>
  <title>KDOC 495: 文芸的にDB動作を検証できるようにする</title>
  <author><name>kijimaD</name></author>
  <content type="html"><![CDATA[<div id="content" class="content">

 <div id="outline-container-org4148487" class="outline-2">
 <h2 id="org4148487"> <a href="#org4148487">この文書のステータス</a></h2>
 <div class="outline-text-2" id="text-org4148487">
 <ul class="org-ul"> <li>作成
 <ul class="org-ul"> <li class="off"> <input type="checkbox"></input> <署名></li>
</ul></li>
</ul> <ul class="org-ul"> <li>レビュー
 <ul class="org-ul"> <li class="off"> <input type="checkbox"></input> <署名></li>
</ul></li>
</ul></div>
</div>
 <div id="outline-container-org151f531" class="outline-2">
 <h2 id="org151f531"> <a href="#org151f531">概要</a></h2>
 <div class="outline-text-2" id="text-org151f531">
 <p>
文芸的にDB動作を検証できるようにした。
</p>
</div>
</div>
 <div id="outline-container-orgfe9e019" class="outline-2">
 <h2 id="orgfe9e019"> <a href="#orgfe9e019">背景</a></h2>
 <div class="outline-text-2" id="text-orgfe9e019">
 <p>
 <a href="https://syu-m-5151.hatenablog.com/entry/2025/11/25/135220">「Postgres で試した？」と聞き返せるようになるまでもしくはなぜ私は雰囲気で技術を語るのか？</a>を読んで、データベースの機能について知らないことが多いのを知った。
</p>

 <p>
コンピュータのほかの事柄と同様に、じっさいに試して、挙動を仔細にみて背景にあるアイデアを理解し、自分なりのモデルを構築していくのが必要に見えた。REPLでいじるだけでなく、体系立てて記録しつつ試していけるとよさそうである。
</p>

 <p>
そういうことを気軽にできるようにした。
</p>
</div>
</div>
 <div id="outline-container-org56616d7" class="outline-2">
 <h2 id="org56616d7"> <a href="#org56616d7">要件</a></h2>
 <div class="outline-text-2" id="text-org56616d7">
 <ul class="org-ul"> <li>少ない準備で気軽にデータベースを実行できる</li>
 <li>文芸的プログラミングができる。入力と標準出力をテキストに残し、そのままドキュメント化できる
 <ul class="org-ul"> <li>入力クエリを出力にエコー表示できる</li>
</ul></li>
 <li>毎回クリーンな環境で、完全に再現できる</li>
 <li>org-mode org-babelの  <code>sql</code> ブロックから直接使える</li>
 <li>完全に同等の機能が使える。インデックス、EXPLAIN、トランザクション…が使える</li>
</ul></div>
</div>
 <div id="outline-container-orgf73306a" class="outline-2">
 <h2 id="orgf73306a"> <a href="#orgf73306a">使用例</a></h2>
 <div class="outline-text-2" id="text-orgf73306a">
 <p>
リポジトリは <a href="https://github.com/kijimad/pgpg">kijimad/pgpg</a>にある。
</p>

 <p>
根本的なアイデアは、データベースのプロキシを実装し、フック処理を追加することである。プロキシで、実験に必要な処理(DB初期化と削除)を実行する。
</p>

 <div class="org-src-container">
 <label class="org-src-name"> <span class="listing-number">Listing 1: </span>DBとプロキシを起動する</label> <pre class="src src-shell">docker compose up -d
</pre>
</div>

 <div class="org-src-container">
 <label class="org-src-name"> <span class="listing-number">Listing 2: </span>org-modeの見出しやファイルヘッダに接続先情報を書く</label> <pre class="src src-org-mode">:PROPERTIES:
  :header-args+: :results table
  :header-args+: :database postgres
  :header-args+: :dbhost localhost
  :header-args+: :dbport 15432
  :header-args+: :dbuser postgres
  :header-args+: :engine postgresql
:END:
</pre>
</div>

 <p>
あとは、org-babelでSQLを実行して評価する。
</p>

 <div class="org-src-container">
 <pre class="src src-sql"> <span class="org-keyword">select</span> 1+1  <span class="org-keyword">as</span>  <span class="org-keyword">result</span>;
</pre>
</div>

 <div class="org-src-container">
 <pre class="src src-nil">|                         |
|-------------------------|
| > select 1+1 as result; |
| result                  |
| 2                       |
</pre>
</div>

 <p>
データベースは接続のたびにリセットされる。完全に再現可能で、あとで読みやすい。
</p>

 <div class="org-src-container">
 <label class="org-src-name"> <span class="listing-number">Listing 3: </span>リセットされるので実行のたびに同じ結果が出る</label> <pre class="src src-sql"> <span class="org-keyword">CREATE</span>  <span class="org-keyword">TABLE</span>  <span class="org-function-name">users</span> (
     <span class="org-keyword">name</span>  <span class="org-type">varchar</span>(255),
    tel  <span class="org-type">integer</span>
);
 <span class="org-keyword">INSERT</span>  <span class="org-keyword">INTO</span> users ( <span class="org-keyword">name</span>, tel)  <span class="org-keyword">VALUES</span> ( <span class="org-string">'きじま'</span>, 100);
 <span class="org-keyword">SELECT</span> *  <span class="org-keyword">FROM</span> users;
</pre>
</div>

 <div class="org-src-container">
 <pre class="src src-nil">|                                                         |     |
|---------------------------------------------------------+-----|
| > CREATE TABLE users (                                  |     |
| >     name varchar(255),                                |     |
| >     tel integer                                       |     |
| > );                                                    |     |
| CREATE TABLE                                            |     |
|                                                         |     |
| > INSERT INTO users (name, tel) VALUES ('きじま', 100); |     |
| INSERT 0 1                                              |     |
|                                                         |     |
| > SELECT * FROM users;                                  |     |
| name                                                    | tel |
| きじま                                                  | 100 |
</pre>
</div>
</div>
</div>
 <div id="outline-container-org6ef0e40" class="outline-2">
 <h2 id="org6ef0e40"> <a href="#org6ef0e40">関連</a></h2>
 <div class="outline-text-2" id="text-org6ef0e40">
 <ul class="org-ul"> <li>動機:  <a href="20240207T092747--kdoc-77-検証する方法があると理解が進む__essay.html#ID-20240207T092747">KDOC 77: 検証する方法があると理解が進む</a>。に基づいて作った</li>
</ul></div>
</div>
</div>]]></content>
  <link href="https://kijimad.github.io/roam/20251206T184941--kdoc-495-文芸的にdb動作を検証できるようにする__draft_project.html"/>
  <id>https://kijimad.github.io/roam/20251206T184941--kdoc-495-文芸的にdb動作を検証できるようにする__draft_project.html</id>
  <updated>2025-12-11T08:55:06+09:00</updated>
</entry>
<entry>
  <title>KDOC 486: 『ソフトウェアアーキテクチャの基礎』</title>
  <author><name>kijimaD</name></author>
  <content type="html"><![CDATA[<div id="content" class="content">

 <div id="outline-container-orgbbacafb" class="outline-2">
 <h2 id="orgbbacafb"> <a href="#orgbbacafb">この文書のステータス</a></h2>
 <div class="outline-text-2" id="text-orgbbacafb">
 <ul class="org-ul"> <li>作成
 <ul class="org-ul"> <li class="off"> <input type="checkbox"></input> <署名></li>
</ul></li>
</ul> <ul class="org-ul"> <li>レビュー
 <ul class="org-ul"> <li class="off"> <input type="checkbox"></input> <署名></li>
</ul></li>
</ul></div>
</div>
 <div id="outline-container-org743e6c7" class="outline-2">
 <h2 id="org743e6c7"> <a href="#org743e6c7">概要</a></h2>
 <div class="outline-text-2" id="text-org743e6c7">
 <p>
『ソフトウェアアーキテクチャの基礎』は、アーキテクチャについて解説する本。
</p>
</div>
</div>
 <div id="outline-container-org8edbd38" class="outline-2">
 <h2 id="org8edbd38"> <a href="#org8edbd38">メモ</a></h2>
 <div class="outline-text-2" id="text-org8edbd38">
 <ul class="org-ul"> <li>アーキテクトは技術的な選択を指定するのではなく、ガイドしなければならない(p9)
 <ul class="org-ul"> <li>「Reactを使う」ではなく、「フロントエンドのWeb開発にリアクティブベースのフレームワークを使う」</li>
</ul></li>
 <li>アーキテクチャと設計の違い(p23)</li>
 <li>アーキテクトと開発チームを隔てている仮想的・物理的な壁を超える一方向のコミュニケーションがアーキテクチャに関するあらゆる問題を引き起こしている。アーキテクト側の決定は開発チームにうまく伝わらず、開発チームの決定はアーキテクトへはほとんど戻されない。壁を取り払い双方向の関係を築くには実質1つのチームである必要がある(p24)</li>
 <li>個人のなかにある知識のピラミッド(p26)
 <ul class="org-ul"> <li>わかっていること</li>
 <li>わかってないとわかっていること</li>
 <li>わかっていないとわかっていないこと</li>
</ul></li>
</ul></div>
</div>
 <div id="outline-container-org0b40c8e" class="outline-2">
 <h2 id="org0b40c8e"> <a href="#org0b40c8e">関連</a></h2>
 <div class="outline-text-2" id="text-org0b40c8e">
 <p>
なし。
</p>
</div>
</div>
</div>]]></content>
  <link href="https://kijimad.github.io/roam/20251118T190900--kdoc-486-『ソフトウェアアーキテクチャの基礎』__draft_book.html"/>
  <id>https://kijimad.github.io/roam/20251118T190900--kdoc-486-『ソフトウェアアーキテクチャの基礎』__draft_book.html</id>
  <updated>2025-12-11T08:55:06+09:00</updated>
</entry>
<entry>
  <title>KDOC 493: 明治神宮ミュージアムを観察する</title>
  <author><name>kijimaD</name></author>
  <content type="html"><![CDATA[<div id="content" class="content">

 <div id="outline-container-org8a3692d" class="outline-2">
 <h2 id="org8a3692d"> <a href="#org8a3692d">この文書のステータス</a></h2>
 <div class="outline-text-2" id="text-org8a3692d">
 <ul class="org-ul"> <li>作成
 <ul class="org-ul"> <li class="off"> <input type="checkbox"></input> <署名></li>
</ul></li>
</ul> <ul class="org-ul"> <li>レビュー
 <ul class="org-ul"> <li class="off"> <input type="checkbox"></input> <署名></li>
</ul></li>
</ul></div>
</div>
 <div id="outline-container-org173d823" class="outline-2">
 <h2 id="org173d823"> <a href="#org173d823">概要</a></h2>
 <div class="outline-text-2" id="text-org173d823">
 <p>
明治神宮ミュージアムは、明治神宮を解説する博物館である。
</p>

 <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d7815.993728924776!2d139.6995454119855!3d35.67233027247567!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x60188d3793afecc3%3A0xa43c8d324731658c!2sMeiji%20Jingu%20Museum!5e1!3m2!1sen!2sjp!4v1764547132110!5m2!1sen!2sjp" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
</div>
</div>
 <div id="outline-container-orgb3fb8bb" class="outline-2">
 <h2 id="orgb3fb8bb"> <a href="#orgb3fb8bb">メモ</a></h2>
 <div class="outline-text-2" id="text-orgb3fb8bb">
 <ul class="org-ul"> <li>神社の建築時に使用したという大きな木の模型がある。これがガラスなどで覆われていなくて、かつ台の空間に余裕があるので、台に手をついてさまざまな角度から眺めやすい。個人的には、模型は上から見てもよくわからない。同じ目線で見て、その縮尺の空間に自分が立っていることを想像しながら見るとおもしろい</li>
 <li>豪華絢爛な明治天皇ゆかりのグッズが展示されている。本質的に王様であることを認識するのであった</li>
 <li>もともと荒れ地で、人工的な森であることに驚いた</li>
 <li>当時撮られた映像があって、映っているものがすべてが珍しく感じた。たしかに歴史はつながっている</li>
 <li>明治神宮があまりに巨大で森なので全貌がわからなかったのだが、社の全体像を把握すると神聖を感じた</li>
</ul></div>
</div>
 <div id="outline-container-org345deb4" class="outline-2">
 <h2 id="org345deb4"> <a href="#org345deb4">関連</a></h2>
 <div class="outline-text-2" id="text-org345deb4">
 <p>
なし。
</p>
</div>
</div>
 <div id="outline-container-orgd8afb3e" class="outline-2">
 <h2 id="orgd8afb3e"> <a href="#orgd8afb3e">Backlinks</a></h2>
 <div class="outline-text-2" id="text-orgd8afb3e">
 <ul class="org-ul"> <li> <a href="./20240908T180537--kdoc-238-他人の博物館を観察して参考にする__project.html">KDOC 238: 他人の博物館を観察して参考にする</a></li>
</ul></div>
</div>
</div>]]></content>
  <link href="https://kijimad.github.io/roam/20251201T085907--kdoc-493-明治神宮ミュージアムを観察する__draft_essay.html"/>
  <id>https://kijimad.github.io/roam/20251201T085907--kdoc-493-明治神宮ミュージアムを観察する__draft_essay.html</id>
  <updated>2025-12-11T08:55:05+09:00</updated>
</entry>
<entry>
  <title>KDOC 482: 日本オリンピックミュージアムを観察する</title>
  <author><name>kijimaD</name></author>
  <content type="html"><![CDATA[<div id="content" class="content">

 <div id="outline-container-orgd9ff5db" class="outline-2">
 <h2 id="orgd9ff5db"> <a href="#orgd9ff5db">この文書のステータス</a></h2>
 <div class="outline-text-2" id="text-orgd9ff5db">
 <ul class="org-ul"> <li>作成
 <ul class="org-ul"> <li class="on"> <input type="checkbox" checked="checked"></input> 2025-11-09 貴島</li>
</ul></li>
 <li>レビュー
 <ul class="org-ul"> <li class="on"> <input type="checkbox" checked="checked"></input> 2025-11-10 貴島</li>
</ul></li>
</ul></div>
</div>
 <div id="outline-container-org57cee68" class="outline-2">
 <h2 id="org57cee68"> <a href="#org57cee68">概要</a></h2>
 <div class="outline-text-2" id="text-org57cee68">
 <p>
 <a href="https://japan-olympicmuseum.jp/jp/">日本オリンピックミュージアム</a>は、東京都新宿区にあるオリンピックの博物館である。
</p>

 <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3907.8700487139677!2d139.7126084119856!3d35.67492027247497!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x60188dd5f0e67841%3A0x9400bc4765094194!2sJapan%20Olympic%20Museum!5e1!3m2!1sen!2sjp!4v1762059791573!5m2!1sen!2sjp" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
</div>
</div>
 <div id="outline-container-org0aca68f" class="outline-2">
 <h2 id="org0aca68f"> <a href="#org0aca68f">メモ</a></h2>
 <div class="outline-text-2" id="text-org0aca68f">
 <ul class="org-ul"> <li>フロアが広々としている。広さの割に人が少なくて快適であった</li>
 <li>オリンピックの歴史、2度の東京オリンピックやパラリンピックなどを解説している</li>
 <li>近代オリンピックは古代オリンピックと直接の関係はない。近代オリンピックはあくまで古代から着想を得たにすぎない</li>
 <li>現在のオリンピックがあまりに巨大なので考えにくいが、最初はひとりのアイデアから始まった「発明」であった</li>
 <li>近代オリンピックはスポーツを教育と結びつけて生まれた。その考え方は当時革新的であった</li>
 <li>開会式や聖火など、オリンピックとセットになっているイベントは、はじめからそうだったわけではない。会ごとに新しい試みとして行われて、うまくいったものを少しづつ取り込んで今の形になっている</li>
 <li>勝敗や特定のスポーツだけに注目しがちだが、沿革を思い出し、純粋に驚くべき人体の動きや国際理解として見る視点もあると考えた</li>
 <li>重さを体感したりプロと自分のジャンプをカメラで比較したりアクティビティも充実していたように見える</li>
 <li>実物の展示が多い。単なるテレビに平面に映っていたシンボル(聖火、メダル、…)が、現実に存在するのだと感じられた</li>
 <li>1960年の東京オリンピックのポスターはあまりに出来がよすぎるように見える。シンプルさが強い印象を持たせる具体例に見える。ポスターでは意図的にパディングを小さく設定していて、躍動感を表現しているという</li>
 <li>巨大な曲面に投影された映像コーナーは選手の躍動や驚くべき肉体、開催国での開会宣言の映像が流れていた。何も語ることはないが、映像は強く訴えかけてくるものがあってすべて見た。
 <ul class="org-ul"> <li>自分で考えさせる余韻があるものはよいものだと感じる</li>
 <li>言語を超えた共通表現、というオリンピックの本質的意味の1つを体現しているように見えた</li>
</ul></li>
 <li>各所にある映像コンテンツは全体的に画面が大きく、快適に見られた。博物館での映像解説を立ち止まって見ることは少ないのだが、快適でほとんど見た</li>
</ul></div>
</div>
 <div id="outline-container-org22e3d43" class="outline-2">
 <h2 id="org22e3d43"> <a href="#org22e3d43">関連</a></h2>
 <div class="outline-text-2" id="text-org22e3d43">
 <ul class="org-ul"> <li>類推: 最初から完成されていたように見えるが、じつは長い歳月で形成されたもの</li>
</ul></div>
</div>
 <div id="outline-container-org4ea25f1" class="outline-2">
 <h2 id="org4ea25f1"> <a href="#org4ea25f1">Backlinks</a></h2>
 <div class="outline-text-2" id="text-org4ea25f1">
 <ul class="org-ul"> <li> <a href="./20240908T180537--kdoc-238-他人の博物館を観察して参考にする__project.html">KDOC 238: 他人の博物館を観察して参考にする</a></li>
</ul></div>
</div>
</div>]]></content>
  <link href="https://kijimad.github.io/roam/20251102T140220--kdoc-482-日本オリンピックミュージアムを観察する__essay.html"/>
  <id>https://kijimad.github.io/roam/20251102T140220--kdoc-482-日本オリンピックミュージアムを観察する__essay.html</id>
  <updated>2025-12-11T08:54:55+09:00</updated>
</entry>
<entry>
  <title>KDOC 494: 日時に関する統計ではタイムゾーンが必要になる</title>
  <author><name>kijimaD</name></author>
  <content type="html"><![CDATA[<div id="content" class="content">

 <div id="outline-container-org06be4cf" class="outline-2">
 <h2 id="org06be4cf"> <a href="#org06be4cf">この文書のステータス</a></h2>
 <div class="outline-text-2" id="text-org06be4cf">
 <ul class="org-ul"> <li>作成
 <ul class="org-ul"> <li class="off"> <input type="checkbox"></input> <署名></li>
</ul></li>
</ul> <ul class="org-ul"> <li>レビュー
 <ul class="org-ul"> <li class="off"> <input type="checkbox"></input> <署名></li>
</ul></li>
</ul></div>
</div>
 <div id="outline-container-org68858d5" class="outline-2">
 <h2 id="org68858d5"> <a href="#org68858d5">概要</a></h2>
 <div class="outline-text-2" id="text-org68858d5">
 <p>
直感的でなかったことのメモ。
</p>

 <p>
たとえば、バックエンドで時間をUTCで保存するシステムがある。DBに保存されている値と、REST APIが返す時間はすべてUTCである。クライアントは各自のタイムゾーンで解釈して表示するような決まりになっている。
</p>

 <p>
点の時刻を返すだけだと単にUTCで返せばいいのだが、日/週/月ごと、などの期間ごとの統計をDBで行うときには期間の境界があるので、クエリにタイムゾーンを考慮した時刻が必要になる。日がいつ始まり終わるどうかは、タイムゾーンで異なる。
</p>
</div>
</div>
 <div id="outline-container-orgc134e03" class="outline-2">
 <h2 id="orgc134e03"> <a href="#orgc134e03">関連</a></h2>
 <div class="outline-text-2" id="text-orgc134e03">
 <p>
なし。
</p>
</div>
</div>
</div>]]></content>
  <link href="https://kijimad.github.io/roam/20251201T172433--kdoc-494-日時に関する統計ではタイムゾーンが必要になる__draft_essay.html"/>
  <id>https://kijimad.github.io/roam/20251201T172433--kdoc-494-日時に関する統計ではタイムゾーンが必要になる__draft_essay.html</id>
  <updated>2025-12-11T08:54:54+09:00</updated>
</entry>
<entry>
  <title>KDOC 492: 小石川植物園を観察する</title>
  <author><name>kijimaD</name></author>
  <content type="html"><![CDATA[<div id="content" class="content">

 <div id="outline-container-orgaa4f5d1" class="outline-2">
 <h2 id="orgaa4f5d1"> <a href="#orgaa4f5d1">この文書のステータス</a></h2>
 <div class="outline-text-2" id="text-orgaa4f5d1">
 <ul class="org-ul"> <li>作成
 <ul class="org-ul"> <li class="off"> <input type="checkbox"></input> <署名></li>
</ul></li>
</ul> <ul class="org-ul"> <li>レビュー
 <ul class="org-ul"> <li class="off"> <input type="checkbox"></input> <署名></li>
</ul></li>
</ul></div>
</div>
 <div id="outline-container-org645d9e7" class="outline-2">
 <h2 id="org645d9e7"> <a href="#org645d9e7">概要</a></h2>
 <div class="outline-text-2" id="text-org645d9e7">
 <p>
小石川植物園は、東京都文京区にある植物園である。
</p>

 <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d7811.570390628713!2d139.74391341198717!3d35.71747657246128!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x60188db3e92ec1bb%3A0xb8d81a9078dce5c5!2sKoishikawa%20Botanical%20Garden!5e1!3m2!1sen!2sjp!4v1764719370847!5m2!1sen!2sjp" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
</div>
</div>
 <div id="outline-container-org33ce3ab" class="outline-2">
 <h2 id="org33ce3ab"> <a href="#org33ce3ab">メモ</a></h2>
 <div class="outline-text-2" id="text-org33ce3ab">
 <ul class="org-ul"> <li>広い。道は多くあって、特に順路などはない</li>
 <li>あまりイントロダクションはない。解説も各所にあるのだが、植物に関する知識がないのであまりピンとこなかった</li>
 <li>博物館として細かい文章を読むというよりは、公園として目で見て楽しんでいる人が多いように見えた。小さい字を読む気もあまり起きなかった。自然豊かなリラックスした雰囲気で、読んだり考えたくなかった。個別の植物を見るというより、森や公園の雰囲気を楽しんだ</li>
 <li>もともと植物を知っている人にとってはまた違った魅力を持つものだろう</li>
</ul></div>
</div>
 <div id="outline-container-orgaa7cd3a" class="outline-2">
 <h2 id="orgaa7cd3a"> <a href="#orgaa7cd3a">関連</a></h2>
 <div class="outline-text-2" id="text-orgaa7cd3a">
 <p>
なし。
</p>
</div>
</div>
 <div id="outline-container-org9fd68e9" class="outline-2">
 <h2 id="org9fd68e9"> <a href="#org9fd68e9">Backlinks</a></h2>
 <div class="outline-text-2" id="text-org9fd68e9">
 <ul class="org-ul"> <li> <a href="./20240908T180537--kdoc-238-他人の博物館を観察して参考にする__project.html">KDOC 238: 他人の博物館を観察して参考にする</a></li>
</ul></div>
</div>
</div>]]></content>
  <link href="https://kijimad.github.io/roam/20251130T101158--kdoc-492-小石川植物園を観察する__draft_essay.html"/>
  <id>https://kijimad.github.io/roam/20251130T101158--kdoc-492-小石川植物園を観察する__draft_essay.html</id>
  <updated>2025-12-11T08:54:54+09:00</updated>
</entry>
<entry>
  <title>KDOC 483: 『ROCK IN!』のコンセプトを話す(訳)</title>
  <author><name>kijimaD</name></author>
  <content type="html"><![CDATA[<div id="content" class="content">

 <div id="outline-container-org349fd63" class="outline-2">
 <h2 id="org349fd63"> <a href="#org349fd63">この文書のステータス</a></h2>
 <div class="outline-text-2" id="text-org349fd63">
 <ul class="org-ul"> <li>作成
 <ul class="org-ul"> <li class="on"> <input type="checkbox" checked="checked"></input> 2025-11-23 貴島</li>
</ul></li>
 <li>レビュー
 <ul class="org-ul"> <li class="on"> <input type="checkbox" checked="checked"></input> 2025-11-25 貴島</li>
</ul></li>
</ul></div>
</div>
 <div id="outline-container-orgb7b7e41" class="outline-2">
 <h2 id="orgb7b7e41"> <a href="#orgb7b7e41">概要</a></h2>
 <div class="outline-text-2" id="text-orgb7b7e41">
 <p>
Vtuberの Koseki Bijou が語った内容のクリップ動画を見て、自分も何か頑張ろうと考えた。文字に書き起こして翻訳をつけた。
</p>

 <iframe width="560" height="315" src="https://www.youtube.com/embed/qb51ZfcpDx0?si=VCYU0TjtKJVdxQ_e&start=1607" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin"></iframe>

 <blockquote>
 <p>
Let’s talk about the concept of the song. Let’s start with the whole concept of the song.
</p>

 <p>
曲のコンセプトについて話そうと思う。曲全体のコンセプトについて。
</p>

 <p>
So I wanted the song to be very like me. So like half brain rot, half not so serious, half like you know not very silly but also has a lot of meaning in me in it and I think it has equal parts of both like you can on the surface level it’s very catchy danceable but if you look in the lyrics and you look at it deeper, its very me in terms of the story and the meaning of the lyrics to it.
</p>

 <p>
私みたいな曲にしたかった。つまり半分は脳が腐ったような感じで、半分は深刻じゃなくて、すごく愚かなわけじゃないけど、私自身の意味もたくさん込めている。両方が均等にある。表面的に見ればキャッチーで踊りやすいけど、歌詞に入り込んで深く見ると、ストーリーや歌詞の意味という点において、まさに私なんだ。
</p>

 <p>
Yeah, there’s lots of I think the lyrics are very smart and they’re very very personal to me.
</p>

 <p>
歌詞はとても賢いと思う。そして私にとっては個人的なんだ。
</p>

 <p>
So thinking of this song and when I was asked what do I want? I said I wanted something that could hype up a crowd on stage.
</p>

 <p>
この曲を思い返すと、どうしたいか聞かれたとき、私はなにかステージの人たちを湧かすような何かがほしい、って言った。
</p>

 <p>
I said that Prism No Maho, you know, was very cutey Biboo and like you know, soft Biboo beginnings, but I wanted this one to be the Biboo that is Biboo right now.
</p>

 <p>
私はプリズムの魔法はビブー初期のキュートでソフトな感じだった、でもこの曲では、今のビブーらしいビブーにしたいと言った。
</p>

 <p>
The high energy meme lord total personality Biboo high high energy sort of thing. So that’s what we were going for and it this is also song that was developed for the stage as well.
</p>

 <p>
高いエネルギーのミームの支配者、それが全体的なビブーの人格という感じ。だからそれが私達が目指す姿で、この曲もステージのために作られた。
</p>

 <p>
So like imagine like something like a concert or fest and Biboo going like “Biboo Biboo!”. I wanted the song to be very like high energy and something that, you know, we would all have fun singing along with and dancing along with on stage.
</p>

 <p>
だから「ビブー!ビブー!」みたいな感じのコンサートやフェスを想像して。曲はそういうハイな感じのものであってほしかった。私たちがステージでいっしょに歌って踊っている間に楽しめるようなものだよ。
</p>

 <p>
So that was the initial concept. And obviously I wanted it to be video game themed.
</p>

 <p>
それが最初のコンセプトだった。そして、明らかにビデオゲームなテーマにしたかった。
</p>

 <p>
Because it was specifically for my live, right? So, I was making this song along side my 3D live which both had to do with video games. So, there’s a general like gaming theme around it.
</p>

 <p>
なぜかって、それは私のライブ配信の特徴だから。そうでしょ? だから、3Dライブと平行で曲を作ったんだけど、どちらもビデオゲームに関連していたんだ。
</p>

 <p>
But if you look into the lyrics deeper than that, it’s not specifically really exactly about video games. It’s more personally the stubborn, determined unable to give up nature of Biboo is kind of the deeper meaing of it.
</p>

 <p>
でも歌詞を深く見ると、本当は厳密にはビデオゲームについてではないんだ。
</p>

 <p>
It which is how I approach life in general and video games and mostly everything I do which is I don’t start out necessarily being the best at something.
</p>

 <p>
それは私が人生全般とビデオゲーム、ほぼすべてのことにアプローチする方法なんだ。私は必ずしも最初から得意な状態でスタートするわけじゃない。
</p>

 <p>
In games in life in Hololive in really anything I do I don’t start out being the best. I start out as knowing nothing. I start out as a little baby not knowing what to do. Lost little baby Biboo.
</p>

 <p>
マジで、ゲーム、人生、ホロライブ … 私がすることはすべて得意な状態で始まったわけじゃない。何も知らないところから始まった。何をするかもわからない小さな赤ん坊として始まった。迷子で赤ん坊のビブー。
</p>

 <p>
And then I keep going and going and going until I get good. And I think that reflects me overall like in everything, not only video games. It’s very reflective of how I play video games too.
</p>

 <p>
そしてうまくやれるまでやり続ける。ビデオゲームだけじゃなくて、あらゆる面で私を反映していると思う。私がどのようにビデオゲームをプレイしているかも、よく反映してる。
</p>

 <p>
Like Dark Souls and specifically, but other video games as well, is where, you know, I’ll there’s a hard boss and it’s hard, but not going give up. I’m going to grind and grind and grind and grind and grind until I get good and then finally reach my goal.
</p>

 <p>
とくにダークソウルみたいなゲームは、ほかのビデオゲームもそうだけど、そこにはハードなボスがいる。だけど諦めない。いい結果が出るまで地道に何回もやりつづける。そして最終的にゴールに到達するんだ。
</p>

 <p>
But again, it’s in all aspects of my life. Like singing, I’m not I started off, you know, not the best sinnger. Even starting off in Hololive, you know, my singing wasn’t that strong. But even now I’m grinding over and over and over and over again to get good.
</p>

 <p>
まただけど、それが私の人生すべての側面なんだ。歌にせよ、私は最高の歌手としてはじまったわけじゃないよね。ホロライブで始めるときですら、私の歌は強くなかった。でも今でも、私は何回も何回もやり続けて、よくなった。
</p>

 <p>
You know sometimes what was it? Sometimes I think like, man, how did I get here in Holive? Because I feel like, you know, I’m not particularly the most skilled in general like dancing, singing, performing, content creation, streaming even. I just came in, you know, I like video games.
</p>

 <p>
たまに、何だったのか?と思う。たまに私はどうやってホロライブにたどり着いたのだろう、というようなことを思う。私は特に最高のスキルを持っていない、ダンスとか歌、パフォーマンス、コンテンツ作成、配信だってそう。私はただ、ビデオゲームが好きだからっていう理由で来た。
</p>

 <p>
I like video games. I play a lot of video games and I play a lot of video games for a long time. So I’m like, how did I get here? But now that I think about it, I like that I came into Hololive not particularly skilled at everything.
</p>

 <p>
私はビデオゲームが好きだ。私は長時間、たくさんのビデオゲームをプレイする。それで、どうやってここにたどり着いたんだ? でも今思えば、何もスキルも持たずにホロライブに入ったことがよかったと思う。
</p>

 <p>
Like I kind of like that I came into Hololive not a great singer. Didn’t know how to dance, was very new, you know, trying to find my footing and everything because then you could see the start of my journey and then you guys could watch me grow alongside me. Yeah, sort of that. Soft of that idea.
</p>

 <p>
私はとくに優れていない歌手としてホロライブに入った。ダンスのしかたも知らなくて、本当に初心者だった。自分の足場を探そうとしていた。そうすれば、君たちは旅の始まりを見られて、私が成長するのを一緒に見られるから。そういう感じ。そういうアイデアなんだ。
</p>

 <p>
Because that’s a very Biboo thing. And that’s what the song is about. Is just, starting off not very new, not knowing much, and then just throwing yourself head first, not worried about making mistakes over and over and over and over again until you slowly but surely get better.
</p>

 <p>
最初は新しくない、多くを知らないところから始める。ただ頭から飛び込む。ミスをすることを恐れずに、遅くとも、うまくなるまで何度も何度も。
</p>

 <p>
And I hope that you can see that in the video. And also just me in general as a person cuz that’s very me as a person. I think one of my strong suits as a person is I’m not afraid to make mistakes.
</p>

 <p>
そういったことがビデオで伝わるのを願っている。そしてひとりの人間としてもね。なぜならそれが私だから。私の強みの一つは、失敗を恐れないことだ。
</p>

 <p>
And I’m not afraid to mess up in front of you guys. I’m very like open with like you know if I make a mistake you see it. I don’t hide it.
</p>

 <p>
そして君たちの前で台無しにすることを恐れない。私はオープンだ。もしミスをしたら、君たちはそれを見るだろう。私は隠さない。
</p>

 <p>
And I think it’s that like no fear of like making oopsies that makes it easy for me to like go again and again and again and again and keep going forward until I get it done.
</p>

 <p>
失敗をしでかすことに対する恐れがないのは、私に何度も挑戦して、達成するまで前に進み続けやすくする。
</p>

 <p>
That was the basis of like envy. It’s in the visuals. It’s in the lyrics and it’s inside people. And I think, you know, biboo not being perfect and, you know, starting off with nothing really maybe it helps you a little bit, too.
</p>

 <p>
それは嫉妬の基礎のようなものだ。ビジュアルになってる。それが歌詞と人々の内側にある。ビブーは完璧ではないこと、何も持たずに始めることだって、少しは助けになるかもしれないと思うんだ。
</p>
</blockquote>
</div>
</div>
 <div id="outline-container-orgb4d2041" class="outline-2">
 <h2 id="orgb4d2041"> <a href="#orgb4d2041">関連</a></h2>
 <div class="outline-text-2" id="text-orgb4d2041">
 <p>
なし。
</p>
</div>
</div>
</div>]]></content>
  <link href="https://kijimad.github.io/roam/20251103T231224--kdoc-483-『rock-in』のコンセプトを話す訳__essay.html"/>
  <id>https://kijimad.github.io/roam/20251103T231224--kdoc-483-『rock-in』のコンセプトを話す訳__essay.html</id>
  <updated>2025-12-11T08:54:54+09:00</updated>
</entry>
<entry>
  <title>KDOC 489: 『Kubernetesで実践するクラウドネイティブDevOps』</title>
  <author><name>kijimaD</name></author>
  <content type="html"><![CDATA[<div id="content" class="content">

 <div id="outline-container-org07ff4e6" class="outline-2">
 <h2 id="org07ff4e6"> <a href="#org07ff4e6">この文書のステータス</a></h2>
 <div class="outline-text-2" id="text-org07ff4e6">
 <ul class="org-ul"> <li>作成
 <ul class="org-ul"> <li class="off"> <input type="checkbox"></input> <署名></li>
</ul></li>
</ul> <ul class="org-ul"> <li>レビュー
 <ul class="org-ul"> <li class="off"> <input type="checkbox"></input> <署名></li>
</ul></li>
</ul></div>
</div>
 <div id="outline-container-orgb16b5fe" class="outline-2">
 <h2 id="orgb16b5fe"> <a href="#orgb16b5fe">概要</a></h2>
 <div class="outline-text-2" id="text-orgb16b5fe">
</div>
</div>
 <div id="outline-container-org8f7a5ca" class="outline-2">
 <h2 id="org8f7a5ca"> <a href="#org8f7a5ca">メモ</a></h2>
 <div class="outline-text-2" id="text-org8f7a5ca">
 <ul class="org-ul"> <li>DepOptsの4つの柱(p5)
 <ul class="org-ul"> <li>文化</li>
 <li>自動化</li>
 <li>測定</li>
 <li>共有</li>
</ul></li>
</ul></div>
</div>
 <div id="outline-container-orgc0665f4" class="outline-2">
 <h2 id="orgc0665f4"> <a href="#orgc0665f4">関連</a></h2>
 <div class="outline-text-2" id="text-orgc0665f4">
 <p>
なし。
</p>
</div>
</div>
</div>]]></content>
  <link href="https://kijimad.github.io/roam/20251122T144737--kdoc-489-『kubernetesで実践するクラウドネイティブdevops』__draft_book.html"/>
  <id>https://kijimad.github.io/roam/20251122T144737--kdoc-489-『kubernetesで実践するクラウドネイティブdevops』__draft_book.html</id>
  <updated>2025-12-11T08:54:52+09:00</updated>
</entry>
<entry>
  <title>KDOC 499: 0番ポートは動的割当に利用される</title>
  <author><name>kijimaD</name></author>
  <content type="html"><![CDATA[<div id="content" class="content">

 <div id="outline-container-org510b082" class="outline-2">
 <h2 id="org510b082"> <a href="#org510b082">この文書のステータス</a></h2>
 <div class="outline-text-2" id="text-org510b082">
 <ul class="org-ul"> <li>作成
 <ul class="org-ul"> <li class="off"> <input type="checkbox"></input> <署名></li>
</ul></li>
</ul> <ul class="org-ul"> <li>レビュー
 <ul class="org-ul"> <li class="off"> <input type="checkbox"></input> <署名></li>
</ul></li>
</ul></div>
</div>
 <div id="outline-container-org1d3ee04" class="outline-2">
 <h2 id="org1d3ee04"> <a href="#org1d3ee04">概要</a></h2>
 <div class="outline-text-2" id="text-org1d3ee04">
 <p>
0番ポートは動的割当に利用される。
</p>

 <blockquote>
 <p>
0番のポートはエニーポート（any port）と呼ばれ、アプリケーションに対して、動的に別番号の空きポートを割り当てるために用意された特殊なポート番号である。
 <a href="https://ja.wikipedia.org/wiki/TCP%E3%82%84UDP%E3%81%AB%E3%81%8A%E3%81%91%E3%82%8B%E3%83%9D%E3%83%BC%E3%83%88%E7%95%AA%E5%8F%B7%E3%81%AE%E4%B8%80%E8%A6%A7">TCPやUDPにおけるポート番号の一覧 - Wikipedia</a>
</p>
</blockquote>
</div>
</div>
 <div id="outline-container-org6c2167e" class="outline-2">
 <h2 id="org6c2167e"> <a href="#org6c2167e">関連</a></h2>
 <div class="outline-text-2" id="text-org6c2167e">
 <p>
なし。
</p>
</div>
</div>
</div>]]></content>
  <link href="https://kijimad.github.io/roam/20251207T203931--kdoc-499-0番ポートは動的割当に利用される__draft_permanent.html"/>
  <id>https://kijimad.github.io/roam/20251207T203931--kdoc-499-0番ポートは動的割当に利用される__draft_permanent.html</id>
  <updated>2025-12-11T08:54:48+09:00</updated>
</entry>
<entry>
  <title>KDOC 490: 301と302/307のキャッシュ動作の違い</title>
  <author><name>kijimaD</name></author>
  <content type="html"><![CDATA[<div id="content" class="content">

 <div id="outline-container-orgd0dc890" class="outline-2">
 <h2 id="orgd0dc890"> <a href="#orgd0dc890">この文書のステータス</a></h2>
 <div class="outline-text-2" id="text-orgd0dc890">
 <ul class="org-ul"> <li>作成
 <ul class="org-ul"> <li class="on"> <input type="checkbox" checked="checked"></input> 2025-12-06 貴島</li>
</ul></li>
 <li>レビュー
 <ul class="org-ul"> <li class="off"> <input type="checkbox"></input> <署名></li>
</ul></li>
</ul></div>
</div>
 <div id="outline-container-org5ef8d66" class="outline-2">
 <h2 id="org5ef8d66"> <a href="#org5ef8d66">概要</a></h2>
 <div class="outline-text-2" id="text-org5ef8d66">
 <p>
HTTPステータスコードの301と302/307は、どれもリダイレクトということで似ているのだが、ブラウザでキャッシュの扱いに違いがある。
</p>

 <p>
301は恒久的リダイレクトで、キャッシュできる、とHTTPの仕様で言及されている。
</p>

 <blockquote>
 <p>
A 301 response is heuristically cacheable; i.e., unless otherwise indicated by the method definition or explicit cache controls (see Section 4.2.2 of [CACHING]).
 <a href="https://www.rfc-editor.org/rfc/rfc9110#status.301">RFC 9110: HTTP Semantics</a>
</p>
</blockquote>

 <p>
302/307は一時的リダイレクトなので、キャッシュについては言及していないように見える。じっさいの動作から考えて、毎回リダイレクト判断するのだろう。
</p>
</div>
</div>
 <div id="outline-container-orgafe17e6" class="outline-2">
 <h2 id="orgafe17e6"> <a href="#orgafe17e6">関連</a></h2>
 <div class="outline-text-2" id="text-orgafe17e6">
 <p>
なし。
</p>
</div>
</div>
</div>]]></content>
  <link href="https://kijimad.github.io/roam/20251128T092223--kdoc-490-301と302307のキャッシュ動作の違い__draft_wiki.html"/>
  <id>https://kijimad.github.io/roam/20251128T092223--kdoc-490-301と302307のキャッシュ動作の違い__draft_wiki.html</id>
  <updated>2025-12-11T08:54:47+09:00</updated>
</entry>
<entry>
  <title>KDOC 485: asepriteでパッキングする</title>
  <author><name>kijimaD</name></author>
  <content type="html"><![CDATA[<div id="content" class="content">

 <div id="outline-container-org2a54b6c" class="outline-2">
 <h2 id="org2a54b6c"> <a href="#org2a54b6c">この文書のステータス</a></h2>
 <div class="outline-text-2" id="text-org2a54b6c">
 <ul class="org-ul"> <li>作成
 <ul class="org-ul"> <li class="on"> <input type="checkbox" checked="checked"></input> 2025-11-10 貴島</li>
</ul></li>
 <li>レビュー
 <ul class="org-ul"> <li class="on"> <input type="checkbox" checked="checked"></input> 2025-11-10 貴島</li>
</ul></li>
</ul></div>
</div>
 <div id="outline-container-orgb41549d" class="outline-2">
 <h2 id="orgb41549d"> <a href="#orgb41549d">概要</a></h2>
 <div class="outline-text-2" id="text-orgb41549d">
 <p>
2Dゲームでは小さな大量の画像を使う。それらを効率的に扱うためにはスプライトの管理が重要である。1ファイルに結合することで、ファイル読み込みを減らして高速化できる。
</p>

 <p>
asepriteはゲーム用のピクセル画像やアニメーションを描くツールであるが、コマンドラインツールとしても使える。ディレクトリ内の画像をまとめて1つの画像にし、それらの対応関係をまとめたJSONを作ってくれるので、コードから読み込みやすくなる。
</p>

 <div class="org-src-container">
 <label class="org-src-name"> <span class="listing-number">Listing 1: </span>tils以下のpngファイルをパッキングする。統合された1枚の画像ファイルとJSONができる</label> <pre class="src src-shell">aseprite  <span class="org-sh-escaped-newline">\</span>
    --batch ./tiles/*.png  <span class="org-sh-escaped-newline">\</span>
    --sheet ./dist/tiles.png  <span class="org-sh-escaped-newline">\</span>
    --data ./dist/tiles.json  <span class="org-sh-escaped-newline">\</span>
    --sheet-type packed  <span class="org-sh-escaped-newline">\</span>
    --format json-array  <span class="org-sh-escaped-newline">\</span>
    --filename-format  <span class="org-string">"{title}"</span>
</pre>
</div>

 <div class="org-src-container">
 <label class="org-src-name"> <span class="listing-number">Listing 2: </span>生成JSON例。ファイル名とピクセルの対応関係が出力されている</label> <pre class="src src-json">{
  "frames": [
    {
      "filename": "tree",
      "frame": {
        "x": 32,
        "y": 64,
        "w": 32,
        "h": 32
      },
      "rotated": false,
      "trimmed": false,
      "spriteSourceSize": {
        "x": 0,
        "y": 0,
        "w": 32,
        "h": 32
      },
      "sourceSize": {
        "w": 32,
        "h": 32
      },
      "duration": 100
    },
    {
      "filename": "doctor",
      "frame": {
        "x": 32,
        "y": 128,
        "w": 32,
        "h": 32
      },
      "rotated": false,
      "trimmed": false,
      "spriteSourceSize": {
        "x": 0,
        "y": 0,
        "w": 32,
        "h": 32
      },
      "sourceSize": {
        "w": 32,
        "h": 32
      },
      "duration": 100
    }
  ]
}
</pre>
</div>
</div>
</div>
 <div id="outline-container-org55bc794" class="outline-2">
 <h2 id="org55bc794"> <a href="#org55bc794">関連</a></h2>
 <div class="outline-text-2" id="text-org55bc794">
 <p>
なし。
</p>
</div>
</div>
</div>]]></content>
  <link href="https://kijimad.github.io/roam/20251106T193702--kdoc-485-asepriteでパッキングする__wiki.html"/>
  <id>https://kijimad.github.io/roam/20251106T193702--kdoc-485-asepriteでパッキングする__wiki.html</id>
  <updated>2025-12-11T08:54:44+09:00</updated>
</entry>
<entry>
  <title>KDOC 484: 『プログラミングコンテスト攻略のためのアルゴリズムとデータ構造』</title>
  <author><name>kijimaD</name></author>
  <content type="html"><![CDATA[<div id="content" class="content">

 <div id="outline-container-org78661a4" class="outline-2">
 <h2 id="org78661a4"> <a href="#org78661a4">この文書のステータス</a></h2>
 <div class="outline-text-2" id="text-org78661a4">
 <ul class="org-ul"> <li>作成
 <ul class="org-ul"> <li class="off"> <input type="checkbox"></input> <署名></li>
</ul></li>
</ul> <ul class="org-ul"> <li>レビュー
 <ul class="org-ul"> <li class="off"> <input type="checkbox"></input> <署名></li>
</ul></li>
</ul></div>
</div>
 <div id="outline-container-org898eb39" class="outline-2">
 <h2 id="org898eb39"> <a href="#org898eb39">概要</a></h2>
 <div class="outline-text-2" id="text-org898eb39">
 <p>
『プログラミングコンテスト攻略のためのアルゴリズムとデータ構造』は、コンテストを題材にして基礎的なアルゴリズムを解説する本。
</p>
</div>
</div>
 <div id="outline-container-org7685421" class="outline-2">
 <h2 id="org7685421"> <a href="#org7685421">メモ</a></h2>
 <div class="outline-text-2" id="text-org7685421">
 <ul class="org-ul"> <li>アルゴリズムの効率は主に2つの計算量で評価される。このトレードオフを考えてアルゴリズムを設計する。時間計算量のほうが問題になることが多い(p43)
 <ul class="org-ul"> <li>時間計算量</li>
 <li>領域計算量</li>
</ul></li>
 <li>重要なことは、プログラムを実装する前に、入力の上限からアルゴリズムの最悪の計算量を評価すること(p45)</li>
 <li>ソートアルゴリズムの選択の基準(p53)
 <ul class="org-ul"> <li>計算量と安定性</li>
 <li>データの列を保持する以外のメモリ</li>
 <li>入力データの特徴が計算量に影響しないか</li>
</ul></li>
 <li>選択ソートは離れた要素を交換するので安定なソートではない(p68)</li>
 <li>キューの実装方法の1つとして、headとtailのポインタを記録しておく方法がある。キューを処理するたびに先頭要素がずれていき、そのままではメモリを無駄にする。かといってheadを常に0に保つようにデータ全体移動させると、そのたびに要素長ぶんの計算が必要になる。ので、リングバッファにする方法がある(p90)</li>
</ul></div>
</div>
 <div id="outline-container-orgc2c9faa" class="outline-2">
 <h2 id="orgc2c9faa"> <a href="#orgc2c9faa">関連</a></h2>
 <div class="outline-text-2" id="text-orgc2c9faa">
 <p>
なし。
</p>
</div>
</div>
</div>]]></content>
  <link href="https://kijimad.github.io/roam/20251106T083403--kdoc-484-『プログラミングコンテスト攻略のためのアルゴリズムとデータ構造』__draft_book.html"/>
  <id>https://kijimad.github.io/roam/20251106T083403--kdoc-484-『プログラミングコンテスト攻略のためのアルゴリズムとデータ構造』__draft_book.html</id>
  <updated>2025-12-11T08:54:43+09:00</updated>
</entry>
<entry>
  <title>KDOC 496: Index (Only) Scanの様子を見る</title>
  <author><name>kijimaD</name></author>
  <content type="html"><![CDATA[<div id="content" class="content">

 <div id="outline-container-orge560f7c" class="outline-2">
 <h2 id="orge560f7c"> <a href="#orge560f7c">この文書のステータス</a></h2>
 <div class="outline-text-2" id="text-orge560f7c">
 <ul class="org-ul"> <li>作成
 <ul class="org-ul"> <li class="off"> <input type="checkbox"></input> <署名></li>
</ul></li>
</ul> <ul class="org-ul"> <li>レビュー
 <ul class="org-ul"> <li class="off"> <input type="checkbox"></input> <署名></li>
</ul></li>
</ul></div>
</div>
 <div id="outline-container-org13f589a" class="outline-2">
 <h2 id="org13f589a"> <a href="#org13f589a">概要</a></h2>
 <div class="outline-text-2" id="text-org13f589a">
 <p>
indexが使われる様子を確かめる。
</p>

 <p>
まず、indexを使わないパターン。
</p>

 <div class="org-src-container">
 <label class="org-src-name"> <span class="listing-number">Listing 1: </span>indexがないフィールドを条件にするのでindexは使われない</label> <pre class="src src-sql"> <span class="org-keyword">CREATE</span>  <span class="org-keyword">TABLE</span>  <span class="org-function-name">users</span> (
     <span class="org-keyword">name</span>  <span class="org-type">varchar</span>(255),
    num  <span class="org-type">integer</span>
);
 <span class="org-keyword">CREATE</span> INDEX idx_users_name  <span class="org-keyword">ON</span> users( <span class="org-keyword">name</span>);

 <span class="org-comment-delimiter">-- </span> <span class="org-comment">indexを使わない
</span>explain
 <span class="org-keyword">select</span>  <span class="org-keyword">name</span>  <span class="org-keyword">from</span> users  <span class="org-keyword">where</span> num = 1;
</pre>
</div>

 <div class="org-src-container">
 <pre class="src src-nil">|                                                        |
|--------------------------------------------------------|
| > CREATE TABLE users (                                 |
| >     name varchar(255),                               |
| >     num integer                                      |
| > );                                                   |
| CREATE TABLE                                           |
|                                                        |
| > CREATE INDEX idx_users_name ON users(name);          |
| CREATE INDEX                                           |
|                                                        |
| > explain                                              |
| > select name from users where num = 1;                |
| QUERY PLAN                                             |
| Seq Scan on users  (cost=0.00..11.75 rows=1 width=516) |
| Filter: (num = 1)                                      |
</pre>
</div>

 <p>
つぎに、index scan するパターン。
</p>

 <div class="org-src-container">
 <label class="org-src-name"> <span class="listing-number">Listing 2: </span>検索にインデックスidx_users_nameを使うが、結果として返すidは含まれていないのでヒープアクセスが発生し、index Only Scanにはならない</label> <pre class="src src-sql"> <span class="org-keyword">CREATE</span>  <span class="org-keyword">TABLE</span>  <span class="org-function-name">users</span> (
    id serial  <span class="org-keyword">PRIMARY</span>  <span class="org-keyword">KEY</span>,
     <span class="org-keyword">name</span>  <span class="org-type">varchar</span>(255)
);
 <span class="org-keyword">CREATE</span> INDEX idx_users_name  <span class="org-keyword">ON</span> users( <span class="org-keyword">name</span>);

explain
 <span class="org-keyword">select</span> id  <span class="org-keyword">from</span> users  <span class="org-keyword">where</span>  <span class="org-keyword">name</span> =  <span class="org-string">'a'</span>;
</pre>
</div>

 <div class="org-src-container">
 <pre class="src src-nil">|                                                                            |
|----------------------------------------------------------------------------|
| > CREATE TABLE users (                                                     |
| >     id serial PRIMARY KEY,                                               |
| >     name varchar(255)                                                    |
| > );                                                                       |
| CREATE TABLE                                                               |
|                                                                            |
| > CREATE INDEX idx_users_name ON users(name);                              |
| CREATE INDEX                                                               |
|                                                                            |
| > explain                                                                  |
| > select id from users where name = 'a';                                   |
| QUERY PLAN                                                                 |
| Index Scan using idx_users_name on users  (cost=0.14..8.16 rows=1 width=4) |
| Index Cond: ((name)::text = 'a'::text)                                     |
</pre>
</div>

 <p>
index only scan するパターン。
</p>

 <div class="org-src-container">
 <label class="org-src-name"> <span class="listing-number">Listing 3: </span>Index Only Scanする。検索にインデックスidx_users_nameを使い、結果もnameだけなので、indexだけで完結する。</label> <pre class="src src-sql"> <span class="org-keyword">CREATE</span>  <span class="org-keyword">TABLE</span>  <span class="org-function-name">users</span> (
     <span class="org-keyword">name</span>  <span class="org-type">varchar</span>(255),
    num  <span class="org-type">integer</span>
);
 <span class="org-keyword">CREATE</span> INDEX idx_users_name  <span class="org-keyword">ON</span> users( <span class="org-keyword">name</span>);

 <span class="org-comment-delimiter">-- </span> <span class="org-comment">indexを使う
</span>explain
 <span class="org-keyword">select</span>  <span class="org-keyword">name</span>  <span class="org-keyword">from</span> users  <span class="org-keyword">where</span>  <span class="org-keyword">name</span> =  <span class="org-string">'a'</span>;
</pre>
</div>

 <div class="org-src-container">
 <pre class="src src-nil">|                                                                                   |
|-----------------------------------------------------------------------------------|
| > CREATE TABLE users (                                                            |
| >     name varchar(255),                                                          |
| >     num integer                                                                 |
| > );                                                                              |
| CREATE TABLE                                                                      |
|                                                                                   |
| > CREATE INDEX idx_users_name ON users(name);                                     |
| CREATE INDEX                                                                      |
|                                                                                   |
| > explain                                                                         |
| > select name from users where name = 'a';                                        |
| QUERY PLAN                                                                        |
| Index Only Scan using idx_users_name on users  (cost=0.14..8.16 rows=1 width=516) |
| Index Cond: (name = 'a'::text)                                                    |
</pre>
</div>
</div>
</div>
 <div id="outline-container-orgcb2f8e9" class="outline-2">
 <h2 id="orgcb2f8e9"> <a href="#orgcb2f8e9">関連</a></h2>
 <div class="outline-text-2" id="text-orgcb2f8e9">
 <p>
なし。
</p>
</div>
</div>
 <div id="outline-container-org579cb33" class="outline-2">
 <h2 id="org579cb33"> <a href="#org579cb33">Backlinks</a></h2>
 <div class="outline-text-2" id="text-org579cb33">
 <ul class="org-ul"> <li> <a href="./20251207T091742--kdoc-497-複合インデックスの使用条件を試す__draft_permanent.html">KDOC 497: 複合インデックスの使用条件を試す</a></li>
</ul></div>
</div>
</div>]]></content>
  <link href="https://kijimad.github.io/roam/20251206T213844--kdoc-496-index-only-scanの様子を見る__draft_permanent.html"/>
  <id>https://kijimad.github.io/roam/20251206T213844--kdoc-496-index-only-scanの様子を見る__draft_permanent.html</id>
  <updated>2025-12-11T08:54:40+09:00</updated>
</entry>
</feed>
