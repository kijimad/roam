<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2025-12-24T21:48:50Z -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>KDOC 507: DNSのルートサーバが13個なのはDNSのUDPのパケット上限が512バイトであるから</title>
<meta name="author" content="kijimaD" />
<meta name="generator" content="Org Mode" />
<link rel='shortcut icon' type='image/x-icon' href='https://kijimad.github.io/roam/favicon.ico' /><link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css' media='print' onload='this.media="all"' /><link rel='stylesheet' href='https://kijimad.github.io/roam/css/site.css' /><link rel='stylesheet' href='https://kijimad.github.io/roam/css/code.css' /><link rel='preconnect' href='https://fonts.googleapis.com'><link rel='preconnect' href='https://fonts.gstatic.com' crossorigin><link href='https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+JP&display=swap' rel='stylesheet'>
</head>
<body>
<div id="preamble" class="status">
<div><div class="header"><div class="container"><div class="row"><div class="col-sm-12 col-md-12"><nav class="navbar navbar-light"/></div></div></div></div></div>
</div>
<div id="content" class="content">
<h1 class="title">KDOC 507: DNSのルートサーバが13個なのはDNSのUDPのパケット上限が512バイトであるから</h1>
<div id="outline-container-orgb8f0c89" class="outline-2">
<h2 id="orgb8f0c89"><a href="#orgb8f0c89">この文書のステータス</a></h2>
<div class="outline-text-2" id="text-orgb8f0c89">
<ul class="org-ul">
<li>作成
<ul class="org-ul">
<li class="off"><input type='checkbox' /> &lt;署名&gt;</li>
</ul></li>
</ul>

<ul class="org-ul">
<li>レビュー
<ul class="org-ul">
<li class="off"><input type='checkbox' /> &lt;署名&gt;</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org69a586a" class="outline-2">
<h2 id="org69a586a"><a href="#org69a586a">概要</a></h2>
<div class="outline-text-2" id="text-org69a586a">
<p>
DNSのルートサーバは13個しかない。これはDNSにおけるUDPのパケット長の上限が512バイトであることからくる制約である(p57)。
</p>

<p>
DNSルートサーバを得るリクエストがどのようなものかを見てみる。これが512バイトを超えないように数の制限があるのだろうか。
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>ルートサーバを見てみる</label><pre class="src src-shell">dig . NS
</pre>
</div>

<div class="org-src-container">
<pre class="src src-nil">
; &lt;&lt;&gt;&gt; DiG 9.18.30-0ubuntu0.24.04.1-Ubuntu &lt;&lt;&gt;&gt; . NS
;; global options: +cmd
;; Got answer:
;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 61072
;; flags: qr rd ra; QUERY: 1, ANSWER: 13, AUTHORITY: 0, ADDITIONAL: 1

;; OPT PSEUDOSECTION:
; EDNS: version: 0, flags:; udp: 65494
;; QUESTION SECTION:
;.				IN	NS

;; ANSWER SECTION:
.			7007	IN	NS	i.root-servers.net.
.			7007	IN	NS	g.root-servers.net.
.			7007	IN	NS	j.root-servers.net.
.			7007	IN	NS	b.root-servers.net.
.			7007	IN	NS	h.root-servers.net.
.			7007	IN	NS	a.root-servers.net.
.			7007	IN	NS	k.root-servers.net.
.			7007	IN	NS	d.root-servers.net.
.			7007	IN	NS	m.root-servers.net.
.			7007	IN	NS	c.root-servers.net.
.			7007	IN	NS	f.root-servers.net.
.			7007	IN	NS	l.root-servers.net.
.			7007	IN	NS	e.root-servers.net.

;; Query time: 0 msec
;; SERVER: 127.0.0.53#53(127.0.0.53) (UDP)
;; WHEN: Sun Dec 21 19:11:45 JST 2025
;; MSG SIZE  rcvd: 239

</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 2: </span>.jpのネームサーバを見る</label><pre class="src src-shell">dig jp. NS
</pre>
</div>

<div class="org-src-container">
<pre class="src src-nil">
; &lt;&lt;&gt;&gt; DiG 9.18.30-0ubuntu0.24.04.1-Ubuntu &lt;&lt;&gt;&gt; jp. NS
;; global options: +cmd
;; Got answer:
;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 57427
;; flags: qr rd ra; QUERY: 1, ANSWER: 8, AUTHORITY: 0, ADDITIONAL: 1

;; OPT PSEUDOSECTION:
; EDNS: version: 0, flags:; udp: 65494
;; QUESTION SECTION:
;jp.				IN	NS

;; ANSWER SECTION:
jp.			6621	IN	NS	d.dns.jp.
jp.			6621	IN	NS	g.dns.jp.
jp.			6621	IN	NS	h.dns.jp.
jp.			6621	IN	NS	c.dns.jp.
jp.			6621	IN	NS	e.dns.jp.
jp.			6621	IN	NS	b.dns.jp.
jp.			6621	IN	NS	a.dns.jp.
jp.			6621	IN	NS	f.dns.jp.

;; Query time: 0 msec
;; SERVER: 127.0.0.53#53(127.0.0.53) (UDP)
;; WHEN: Sun Dec 21 19:16:20 JST 2025
;; MSG SIZE  rcvd: 163

</pre>
</div>
</div>
</div>
<div id="outline-container-orge0c0062" class="outline-2">
<h2 id="orge0c0062"><a href="#orge0c0062">関連</a></h2>
<div class="outline-text-2" id="text-orge0c0062">
<ul class="org-ul">
<li>参照: <a href="20241102T084716--kdoc-258-『ピアリング戦記』__book.html#ID-20241102T084716">KDOC 258: 『ピアリング戦記』</a>から</li>
<li>追加調査: なぜ13個になるのか詳細を調べる</li>
</ul>
</div>
</div>
</div>
<div id="postamble" class="status">
<footer class="footer py-3"><div class="container"><div class="row "><div class="col-md-4"></div><div class="col-sm col-md"><nav class="navbar"><a class="nav-link text-secondary small px-0" href="./index.html">Insomnia</a><a class="nav-link text-secondary small px-0" href="./sitemap.html">Sitemap</a><a class="nav-link text-secondary small px-0" href="https://github.com/kijimaD/roam">Repository</a><a class="nav-link text-secondary small px-0" href="https://github.com/kijimaD">@kijimaD</a></nav></div><div class="col-md-4"></div></div></div></footer>
</div>
</body>
</html>
