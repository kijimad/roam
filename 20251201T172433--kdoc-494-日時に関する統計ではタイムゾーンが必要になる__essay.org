:properties:
:ID: 20251201T172433
:end:
#+title:      KDOC 494: 日時に関する統計ではタイムゾーンが必要になる
#+date:       [2025-12-01 Mon 17:24]
#+filetags:   :essay:
#+identifier: 20251201T172433

* この文書のステータス
- 作成
  - [X] 2025-12-15 貴島
- レビュー
  - [X] 2025-12-15 貴島

* 概要

直感的でなかったことのメモ。

たとえば、バックエンドで時間をUTCで保存するシステムがある。DBに保存されている値と、REST APIが返す時間はすべてUTCである。クライアントは各自のタイムゾーンで解釈して表示するような決まりになっている。

点の時刻を返すだけだと単にUTCで返せばいいのだが、日/週/月ごと、などの期間ごとの統計をDBで行うときには期間の境界があるので、クエリにタイムゾーンを考慮した時刻が必要になる。日がいつ始まり終わるどうかは、タイムゾーンで異なる。

* 関連

- 類推: ほかにUTC保存で気をつけるところはあるか
